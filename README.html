<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<title>README.html</title>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>

</head>

<body>

<h1>niconico-parser</h1>

<p>ニコニコ大百科のHTML を分析するためのツール</p>

<h2>Requirements</h2>

<ul>
<li>Memory 8GB~ <br />
CSVデータを読み込む</li>
<li>shell <br />
ファイル操作。Linux が Reccomend</li>
<li>leiningen <br />
このプログラムの言語処理系</li>
<li>sqlite3 <br />
DB 管理
<h2>Usage</h2></li>
</ul>

<h3>Niconico大百科データセットから</h3>

<p>まずzipファイルを解凍し、整形します。
この手順については <a href="./doc/init_corpus.org">doc/init_corpus.org</a> を参照してください。</p>

<h3>Web ページの URL から</h3>

<p><code>
lein parse-from-web -u https://dic.nicovideo.jp/a/&lt;contents-title&gt;
</code></p>

<p><code>&lt;タイトル&gt;.json</code> を得ることができます。</p>

<p>また、 json ファイルを整形するためのツールとして、 <code>format.sh</code> を作成しました。</p>

<p>json ファイルの入ったフォルダ内で</p>

<p><code>
sh format.sh
</code></p>

<p>とすることで、同一階層のすべての json ファイルを見ることができます。</p>

<h2>形式</h2>

<p><code>
{"title": &lt;記事タイトル&gt;
"title-head": &lt;記事タイトル（詳細）&gt;
"keywords": [&lt;記事につけられるキーワード&gt;]
"article": [&lt;article&gt;]
"related_words": [[&lt;related_words&gt;]]}
</code></p>

<p>article は次のようになります。</p>

<ol>
<li>dict 構造の場合
<code>
[{"type" : "element"
"attrs" : &lt;html attr の dict ex. {"id": "page-menu"}&gt;
"tag": &lt;"ul" "td" "p"などの 要素名&gt;
"content" : &lt;article (つまり下の階層)&gt;
}]
</code></li>
<li>文字列の場合 <br />
<code>&lt;i&gt;</code> や <code>&lt;span&gt;</code> といった装飾タグについては省くようにプログラムしてあります。
そのため、それらを省いた要素は dict 構造ではなく string になっています。</li>
</ol>

<p>つまり、以下のような構造が得られます。
<code>
["hogehoge は foo である。"
"foo は bar とも言われている。"
{...}
{...}
]
</code></p>

<p>どのタグを削除したかは、 <a href="./doc/remove_tags.org">./doc/remove_tags.org</a> を参照してください。</p>

<h2>related_words について</h2>

<p>related_words は主に関連項目から収集される項目名のリストです。このリストは階層が存在する場合が多く見られるため、やや複雑な構造を取っています。</p>

<p>また、一つの項目名で、 <code>hoge・bar</code> という風に2つのものを指している場合があります。この場合については、名前の <code>foo・huga</code> との差別化を図るために、 <code>hoge///bar</code> と <code>///</code> で区切る処理を行っています。</p>

<h1>bug について</h1>

<p>Please notice via Issue or my Twitter (DM or reply)</p>

</body>
</html>
